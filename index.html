<!DOCTYPE html>
<!-- Slate template by Jason Costello, @jsncostello
     Modified by Jake Hartz for use with the SerGIS Project. -->
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
<meta name="description" content="Slate is a responsive theme for GitHub Pages">
<link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css" data-set-attribute="href stylesheet.css">
<!-- VERSION NUMBER -->
<script>var SERGIS_PROMPT_AUTHOR_VERSION = "1.0";</script>
<title>SerGIS Prompt Author</title>
</head>

<body>

<!-- "Full" Body Content -->
<div id="full_content_wrap" class="outer" style="display: none;">
  <div id="full_content"></div>
</div>

<!-- Header and Toolbar -->
<div id="header_wrap" class="outer">
  <header class="inner">
    <h1 id="project_title">SerGIS Prompt Author</h1>
    <section id="toolbar">
      <!-- Icons made by <a href="http://www.freepik.com">Freepik</a> from <a href="http://www.flaticon.com">www.flaticon.com</a> are licensed under <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons BY 3.0</a>. -->
      <a id="toolbar_publish" href="#" title="Publish Game on SerGIS Server" tabindex="6" style="display: none;">Publish</a>
      <a id="toolbar_preview" href="#" target="_blank" title="Preview SerGIS Game" tabindex="5" style="display: none;">Preview</a>
      <a id="toolbar_export" href="#" title="Download JSON Game Data File" tabindex="4" style="display: none;">Export</a>
      <a id="toolbar_open" href="#" title="Create, Open, or Import Game" tabindex="3">Create/Open</a>
    </section>
  </header>
</div>

<!-- Main Body Content -->
<div id="main_content_wrap" class="outer">
  <section id="main_content" class="inner">
    <div id="instructions" style="display: none;">
      <p>To create your new SerGIS Game, just start adding data below! Your game is saved automatically.</p>
      <p>To preview what your game will look like, click "Preview".</p>
      <p>Once you have finished your game, click "Publish" to publish it on the SerGIS Server.</p>
    </div>

    <h2>General Properties</h2>
    <table class="noborder">
      <tbody>
        <tr>
          <td><input type="checkbox" id="general_jumpingBackAllowed" tabindex="12"></td>
          <td><label for="general_jumpingBackAllowed">Jumping Back Allowed</label></td>
        </tr>
        <tr>
          <td>&nbsp;</td>
          <td><label for="general_onJumpBack">When a user jumps back: </label><select id="general_onJumpBack" tabindex="13">
            <option value="reset" title="Disregard all the choices that the user has made" selected>Disregard choices</option>
            <option value="" title="Remember the user’s choices and show the corresponding Map Actions on the map">Remember choices and show actions</option>
            <option value="hide" title="Remember the user’s choices, but don’t show any Map Actions on the map">Remember choices but hide actions</option>
          </select><label> for prompts after the one that the user is jumping back to.</label></td>
        </tr>
        <tr>
          <td><input type="checkbox" id="general_jumpingForwardAllowed" tabindex="14"></td>
          <td><label for="general_jumpingForwardAllowed">Jumping Forward Allowed</label></td>
        </tr>
        <tr>
          <td><input type="checkbox" id="general_showActionsInUserOrder" tabindex="15"></td>
          <td><label for="general_showActionsInUserOrder">Show Actions In User Order</label></td>
        </tr>
      </tbody>
    </table>

    <h2>Prompts</h2>
    <div id="promptContainer"></div>
    <p><button id="addPrompt" class="main-button">Add Prompt</button> <input id="expandAllPrompts" type="checkbox"><label for="expandAllPrompts"> Expand All Prompts</label></p>
  </section>
</div>

<!-- Footer Content -->
<div id="footer_wrap" class="outer">
  <footer class="inner">
    <p>SerGIS Prompt Author<span id="version_outer" style="display: none;"> version <span id="version_inner"></span></span></p>
    <p><a id="viewjson" href="#">View JSON Game Data for current game</a></p>
    <p><a href="http://sergisproject.github.io/">The SerGIS Project</a> &mdash; <a href="https://github.com/sergisproject/sergis-author/">View SerGIS Author on GitHub</a></p>
  </footer>
</div>

<!-- Overlays/dialogs -->
<div id="overlay" class="overlay_outer">
  <!-- <table><tbody><tr><td> -->
    <!-- Loading overlay -->
    <div id="overlay_loading" class="overlay_inner" style="text-align: center; display: block;">
      <!--[if lt IE 9]><p>Please upgrade to a <a href="http://whatbrowser.org/">modern browser</a>.</p><![endif]-->
      <!--[if gte IE 9]>-->
      <p>Loading...</p>
      <noscript><p>Please enable JavaScript.</p></noscript>
      <!--<![endif]-->
    </div>
    
    <!-- Prompt overlay -->
    <div id="overlay_prompt" class="overlay_inner" style="display: none;">
      <form id="overlay_prompt_form">
        <p id="overlay_prompt_error"></p>
        <p class="inputcontainer"><label for="overlay_prompt_input"><span id="overlay_prompt_text"></span> </label><span><input id="overlay_prompt_input"></span></p>
        <p class="overlay_buttons"><input type="submit" class="main-button" value="OK"><button id="overlay_prompt_cancel" class="sub-button">Cancel</button></p>
      </form>
    </div>
    
    <!-- Alert overlay -->
    <div id="overlay_alert" class="overlay_inner" style="display: none;">
      <p id="overlay_alert_text" style="text-align: center;"></p>
      <p class="overlay_buttons"><button id="overlay_alert_ok" class="main-button">OK</button></p>
    </div>
    
    <!-- Confirm overlay -->
    <div id="overlay_confirm" class="overlay_inner" style="display: none;">
      <p id="overlay_confirm_text" style="text-align: center;"></p>
      <p class="overlay_buttons"><button id="overlay_confirm_yes" class="main-button">Yes</button><button id="overlay_confirm_no" class="sub-button">No</button></p>
    </div>
    
    <!-- Create/Open Game overlay -->
    <div id="overlay_games" class="overlay_inner" style="display: none;">
      <h2>SerGIS Prompt Author</h2>
      <div class="tabs">
        <a id="overlay_games_tab_create" href="#" class="selected">Create Game</a>
        <a id="overlay_games_tab_open" href="#">Open Game</a>
        <a id="overlay_games_tab_import" href="#">Import Game from File</a>
      </div>
      
      <div id="overlay_games_create" class="tabcontent">
        <form id="overlay_games_create_form">
          <p id="overlay_games_create_invalid" style="display: none;">The game name that you provided is invalid.</p>
          <p id="overlay_games_create_taken" style="display: none;">The game name that you provided is already in use.</p>
          <p class="inputcontainer"><label for="overlay_games_create_name">Game Name: </label><span><input id="overlay_games_create_name"></span></p>
          <p><input type="submit" value="Create Game"></p>
        </form>
      </div>
      
      <div id="overlay_games_open" class="tabcontent" style="display: none;">
        <p>Your Games:</p>
        <table>
          <thead>
            <tr>
              <th>Game Name</th>
              <th>Last Modified</th>
            </tr>
          </thead>
          <tbody id="overlay_games_open_gamescontainer"></tbody>
        </table>
      </div>
      
      <div id="overlay_games_import" class="tabcontent" style="display: none;">
        <p>SerGIS Prompt Author can open JSON files with data in the <a href="http://sergisproject.github.io/legacy-docs/json.html" target="_blank">SerGIS JSON Game Data</a> format.<br>This includes any JSON files that were exported from the SerGIS Prompt Author.</p>
        <p><button id="overlay_games_import_open">Select JSON File</button></p>
      </div>

      <p id="overlay_games_buttons" class="overlay_buttons" style="display: none;"><button id="overlay_games_cancel">Cancel</button></p>
    </div>

    <!-- View JSON overlay -->
    <div id="overlay_viewjson" class="overlay_inner" style="display: none;">
      <h2>View JSON</h2>
      <p id="overlay_viewjson_selectall" style="display: none;"><a id="overlay_viewjson_selectall_link" href="#">Select All</a></p>
      <pre id="overlay_viewjson_content"></pre>
      <p class="overlay_buttons"><button id="overlay_viewjson_close">Close</button></p>
    </div>

    <!-- Edit Map Properties overlay -->
    <div id="overlay_editFrontendInfo" class="overlay_inner" style="display: none;">
      <h2>Map Properties</h2>
      <div id="overlay_editFrontendInfo_contentContainer"></div>
      <hr>
      <p class="overlay_buttons"><button id="overlay_editFrontendInfo_reset" class="sub-button">Reset</button><button id="overlay_editFrontendInfo_close" class="main-button">Close</button></p>
    </div>

    <!-- Add/Edit Content/Choice overlay -->
    <div id="overlay_editor" class="overlay_inner" style="display: none;">
      <h2 class="overlay_editor_title" id="overlay_editor_title_addcontent">Add Content</h2>
      <h2 class="overlay_editor_title" id="overlay_editor_title_editcontent">Edit Content</h2>
      <h2 class="overlay_editor_title" id="overlay_editor_title_addchoice">Add Choice</h2>
      <h2 class="overlay_editor_title" id="overlay_editor_title_editchoice">Edit Choice</h2>

      <p style="text-align: center;"><label for="overlay_editor_contentType">Content Type: </label><select id="overlay_editor_contentType"></select></p>
      <div id="overlay_editor_contentContainer"></div>
      <hr>

      <p class="overlay_buttons"><button id="overlay_editor_cancel" class="sub-button">Cancel</button><button id="overlay_editor_save" class="main-button">Save</button></p>
    </div>

    <!-- Add/Edit Action overlay -->
    <div id="overlay_actionEditor" class="overlay_inner" style="display: none;">
      <h2 class="overlay_actionEditor_title" id="overlay_actionEditor_title_addaction">Add Action</h2>
      <h2 class="overlay_actionEditor_title" id="overlay_actionEditor_title_editaction">Edit Action</h2>

      <p style="text-align: center;"><label for="overlay_actionEditor_name">Action Name: </label><select id="overlay_actionEditor_name"></select></p>
      <p style="text-align: center;" class="action-description" id="overlay_actionEditor_description"></p>
      <form id="overlay_actionEditor_contentContainer"></form>
      <hr>

      <p class="overlay_buttons"><button id="overlay_actionEditor_cancel" class="sub-button">Cancel</button><button id="overlay_actionEditor_save" class="main-button">Save</button></p>
    </div>
    
    <!-- Publish overlay -->
    <div id="overlay_publish" class="overlay_inner" style="display: none;">
      <h2>Publish Game</h2>
      <iframe name="overlay_publish_iframe" style="width: 100%; height: 300px; border-style: none; background: transparent;"></iframe>
      <p class="overlay_buttons"><button id="overlay_publish_close">Close</button></p>
    </div>
  <!-- </td></tr></tbody></table> -->
</div>

<div style="display: none;">
  <div id="fileinputs"></div>
  <div id="openPageForms"></div>
  <form id="publish-form" method="POST" target="_blank" enctype="multipart/form-data">
    <textarea id="publish-form-input" name="jsondata"></textarea>
  </form>
</div>



<!-- Translation ("_") API -->
<script type="text/javascript" src="http://www.localeplanet.com/api/auto/icu.js"></script>
<script type="text/javascript" src="http://www.localeplanet.com/api/translate.js"></script>

<!-- Promise polyfill -->
<script type="text/javascript" src="javascripts/es6-promise-2.0.0.min.js" data-set-attribute="src es6-promise-2.0.0.min.js"></script>
<script type="text/javascript">
// Use Promise polyfill if needed
if (typeof Promise == "undefined") Promise = ES6Promise.Promise;
</script>

<!-- LocalForage -->
<script type="text/javascript" src="javascripts/localforage.nopromises.min.js" data-set-attribute="src localforage.nopromises.min.js"></script>

<!-- socket.io API (if applicable) -->
<script type="text/javascript" data-set-attribute="src socket-io-script-src"></script>

<!-- SerGIS Prompt Author config -->
<script type="text/javascript">
var AUTHOR = {};
AUTHOR.CONFIG = {
    /**
     * The URL of a public hosting of the SerGIS Web Client that is using the
     * local.js backend.
     * This allows instant previews of games via the "Preview Game" button.
     * If the backend has a "previewGame" function, then that overrides this.
     * If neither "previewGame" in the backend nor this is not provided, then
     * the "Preview Game" button is not available.
     */
    clientPreviewURL: "http://geoapps64.main.ad.rit.edu/serious_game_spatial_thinking/web_game/"
};
</script>

<!-- Concatenated and minified scripts (if available) -->
<script id="author_backend_script" type="text/javascript" data-set-attribute="src author-js-src; data-socket-io-origin socket-io-origin; data-socket-io-prefix socket-io-prefix; data-session session"></script>

<!-- All the individual scripts, if we don't have a concatenated and minified version -->
<script type="text/javascript" src="javascripts/author-main.js" data-set-if="no-minified"></script>
<script type="text/javascript" src="javascripts/author-ask.js" data-set-if="no-minified"></script>

<script type="text/javascript" src="javascripts/author-json.js" data-set-if="no-minified"></script>
<script type="text/javascript" src="javascripts/author-games.js" data-set-if="no-minified"></script>
<script type="text/javascript" src="javascripts/author-table.js" data-set-if="no-minified"></script>

<script type="text/javascript" src="javascripts/author-editor.js" data-set-if="no-minified"></script>
<script type="text/javascript" src="javascripts/author-action-editor.js" data-set-if="no-minified"></script>
<script type="text/javascript" src="javascripts/author-frontend-info-editor.js" data-set-if="no-minified"></script>

<!-- SerGIS Prompt Author backend -->
<script type="text/javascript" src="javascripts/author-backend_local.js" data-set-if="no-minified"></script>

<!--
Files with onload handlers:
    author-main.js
    author-ask.js
    author-games.js
    author-table.js
    author-editor.js
    author-action-editor.js
    author-frontend-info-editor.js
-->

</body>
</html>
